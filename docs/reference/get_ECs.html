<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Compute environmental covariates for each environment of the MET dataset. — get_ECs • learnMET</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Compute environmental covariates for each environment of the MET dataset. — get_ECs" />
<meta property="og:description" content="This function enables to retrieve daily weather data from NASA POWER source
for each environment and derive environmental covariates over non-overlapping
time windows, which can be defined in various ways by the user.
The user can also provide own daily weather data, even for only part of the
total number of environments. For the remaining environments, weather data
will be retrieved using the NASA POWER query." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">learnMET</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/model_interpretation.html">Interpretation of the fitted ML models using genomic and environmental data</a>
    </li>
    <li>
      <a href="../articles/vignette_cv_stacking_indica.html">Evaluation of the model performance of a stacked model using CV0 on a rice dataset for phenotypic prediction</a>
    </li>
    <li>
      <a href="../articles/vignette_cv_xgb_indica.html">Evaluation of the performance of a XGBoost model using CV2 on a rice dataset for phenotypic prediction</a>
    </li>
    <li>
      <a href="../articles/vignette_getweatherdata.html">Create a METData object with weather data retrieved by nasapower</a>
    </li>
    <li>
      <a href="../articles/vignette_stacking.html">Overview on the different Machine Learning-based models in learnMET</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/cjubin/learnMET/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Compute environmental covariates for each environment of the MET dataset.</h1>
    <small class="dont-index">Source: <a href='https://github.com/cjubin/learnMET/blob/master/R/get_ECs.R'><code>R/get_ECs.R</code></a></small>
    <div class="hidden name"><code>get_ECs.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function enables to retrieve daily weather data from NASA POWER source
for each environment and derive environmental covariates over non-overlapping
time windows, which can be defined in various ways by the user.
The user can also provide own daily weather data, even for only part of the
total number of environments. For the remaining environments, weather data
will be retrieved using the NASA POWER query.</p>
    </div>

    <pre class="usage"><span class='fu'>get_ECs</span><span class='op'>(</span>
  <span class='va'>info_environments</span>,
  raw_weather_data <span class='op'>=</span> <span class='cn'>NULL</span>,
  method_ECs_intervals <span class='op'>=</span> <span class='st'>"fixed_nb_windows_across_env"</span>,
  save_daily_weather_tables <span class='op'>=</span> <span class='cn'>T</span>,
  path_data <span class='op'>=</span> <span class='cn'>NULL</span>,
  crop_model <span class='op'>=</span> <span class='cn'>NULL</span>,
  nb_windows_intervals <span class='op'>=</span> <span class='fl'>10</span>,
  duration_time_window_days <span class='op'>=</span> <span class='fl'>10</span>,
  base_temperature <span class='op'>=</span> <span class='fl'>10</span>,
  max_temperature <span class='op'>=</span> <span class='fl'>35</span>,
  capped_max_temperature <span class='op'>=</span> <span class='cn'>F</span>,
  intervals_growth_manual <span class='op'>=</span> <span class='cn'>NULL</span>,
  et0 <span class='op'>=</span> <span class='cn'>F</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>info_environments</th>
      <td><p>a <code>data.frame</code> with the following columns:</p><ol>
<li><p>year: <code>numeric</code> Year label of the environment</p></li>
<li><p>location: <code>character</code> Name of the location</p></li>
<li><p>longitude: <code>numeric</code> longitude of the environment</p></li>
<li><p>latitude: <code>numeric</code> latitude of the environment</p></li>
<li><p>IDenv: <code>character</code> ID of the environment (location-year)</p></li>
<li><p>planting.date: (optional) <code>Date</code> YYYY-MM-DD</p></li>
<li><p>harvest.date: (optional) <code>Date</code> YYYY-MM-DD</p></li>
</ol>
<ul>
<li><p><strong>The data.frame should contain as many rows as Year x Location
combinations which will be used in pheno_new.</strong></p></li>
</ul></td>
    </tr>
    <tr>
      <th>raw_weather_data</th>
      <td><p>a <code>data.frame</code> which contains the following
mandatory columns:</p><ol>
<li><p>longitude <code>numeric</code></p></li>
<li><p>latitude <code>numeric</code></p></li>
<li><p>year <code>numeric</code></p></li>
<li><p>location <code>character</code></p></li>
<li><p>YYYYMMDD <code>Date</code> Date of the daily observation</p></li>
<li><p>IDenv <code>character</code> Environmt ID written Location_Year</p></li>
<li><p>T2M <code>numeric</code> Average mean temperature (degree Celsius)</p></li>
<li><p>T2M_MIN <code>numeric</code> Min. temperature (degree Celsius)</p></li>
<li><p>T2M_MAX <code>numeric</code> Max. temperature (degree Celsius)</p></li>
<li><p>PRECTOTCORR <code>numeric</code> Total daily precipitation (mm)</p></li>
</ol><p>Additional weather data provided by user must be a subset of the following
weather variable names (= next columns):
(<strong>Any imputation step should be performed before providing
this daily weather dataset to the package. </strong>):</p><ol>
<li><p>RH2M <code>numeric</code> Daily mean relative humidity (%)</p></li>
<li><p>RH2M_MIN <code>numeric</code> Daily minimum relative humidity (%)</p></li>
<li><p>RH2M_MAX <code>numeric</code> Daily maximum relative humidity (%)</p></li>
<li><p>daily_solar_radiation <code>numeric</code> daily solar radiation
(MJ/m^2/day)</p></li>
<li><p>T2MDEW <code>numeric</code> Dew Point (°C)</p></li>
</ol><p>Default is <code>NULL</code>.</p></td>
    </tr>
    <tr>
      <th>method_ECs_intervals</th>
      <td><p><code>character</code> A method among the four
available:</p><ol>
<li><p>user_defined_intervals: if chosem the user must provide a data.frame
intervals_growth_manual, described as parameter.</p></li>
<li><p>GDD: day-intervals are determined based on growing degree days
estimation, given a crop_model (argument must be provided).</p></li>
<li><p>fixed_nb_windows_across_env: in each environment,
the growing season is split into a number of windows equal to
nb_windows_intervals.</p></li>
<li><p>fixed_length_time_windows_across_env: in each environment,
the growing season is divided into windows which always span the same
length determined by the argument duration_time_window_days.</p></li>
</ol><p>Default method is <strong>fixed_nb_windows_across_env</strong>.</p></td>
    </tr>
    <tr>
      <th>save_daily_weather_tables</th>
      <td><p><code>logical</code> indicates whether the
daily weather tables should be saved. Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>path_data</th>
      <td><p><code>character</code> Path of the folder where a
RDS object will be created to save the daily weather tables if saved. (Do
not use a Slash after the name of the last folder.)</p></td>
    </tr>
    <tr>
      <th>crop_model</th>
      <td><p><code>character</code> A crop_model among those implemented in
<code><a href='gdd_information.html'>gdd_information()</a></code>. This argument is necessary only when the
method_ECs_intervals called is "GDD". Default is NULL.</p></td>
    </tr>
    <tr>
      <th>nb_windows_intervals</th>
      <td><p><code>numeric</code> Number of day-windows covering
the growing season length (common number of day-windows across all
environments). This argument is used if the default option for
method_ECs_intervals is used ('fixed_nb_windows_across_env'). Default is 10.</p></td>
    </tr>
    <tr>
      <th>duration_time_window_days</th>
      <td><p>This argument is used only when the option
'fixed_length_time_windows_across_env' is chosen. It determines the fixed
number of days spanned within each window, across all environments.
Default value is 10.</p></td>
    </tr>
    <tr>
      <th>base_temperature</th>
      <td><p><code>numeric</code> It can be chosen by the user,
to calculate GDD more accurately, based on the crop. Default value is 10
degree Celsius. Base temperature will always be used by default.</p></td>
    </tr>
    <tr>
      <th>max_temperature</th>
      <td><p><code>numeric</code> It can be chosen by the user,
to calculate GDD by capping max temperature above this given threshold,
based on the crop. Default value is 35 degree Celsius. By default, it is
not used.</p></td>
    </tr>
    <tr>
      <th>intervals_growth_manual</th>
      <td><p><code>data.frame</code> which is required only if
the method_ECs_intervals chosen is "user_defined_intervals".</p><ul>
<li><p>column 1: <code>numeric</code> year</p></li>
<li><p>column 2: <code>character</code> location</p></li>
<li><p>columns 3 and +: <code>numeric</code> Date (in Days after Planting) at which
the crop enters a new growth stage in a given environment.
"P" refers to the planting date and should contain 0 as value, "VE" to
emergence, etc...
<strong>Day 0 (Planting Date, denoted "P") should be in the third column.
At least 4 columns should be in this data.frame. There is no need to
indicate the column "Harvest" - already considered in the function.</strong>
An example of how this data.frame should be provided is given in
<a href='intervals_growth_manual_G2F.html'>intervals_growth_manual_G2F</a>.<br />
Default is NULL.</p></li>
</ul></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed to the <code>compute_EC()</code> function.</p></td>
    </tr>
    <tr>
      <th>fixed_length_time_windows_across_env</th>
      <td><p><code>logical</code> indicates if the
growing season lengths should be divided in non-overlapping time windows of
fixed lengths (in days) across all environments.
This implies that the total number of time windows, which need to be common
across all environments, is determined by the shortest growing season
included in the MET environments. This further implies that the total
growing season may not be covered by the environmental predictors for
the longest growing seasons.<br />
Default is <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>fixed_nb_windows_across_env</th>
      <td><p><code>logical</code> indicates if the
growing season lengths should be divided in a fixed number of
non-overlapping windows, which fully cover the growing season of each
environment. This means that these time windows might not be of same length
across environments (but always of same length in one environment). <br />
Default is <code>FALSE</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>data.frame</code> object containing the weather-based environmental
covariates.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Sparks AH (2018).
&#8220;nasapower: a NASA POWER global meteorology, surface solar energy and climatology data client for R.&#8221;
<em>Journal of Open Source Software, 3 (30), 1035</em>.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Cathy C. Westhues <a href='mailto:cathy.jubin@uni-goettingen.de'>cathy.jubin@uni-goettingen.de</a></p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Cathy Westhues (Jubin).</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


